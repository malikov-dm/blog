# Шпаргалка по использованию Git 5

## Просмотр

### Просмотр изменений: git diff

```bash
git diff <branch_name1> <branch_name2>      # разница между коммитами, на которые указывают указатели
git diff <branch_name1>..<branch_name2>     # то же самое
git diff <branch_name1>...<branch_name2>    # что изменилось в ветке <branch_name2> с момента ответвления от ветки <branch_name1>
```

В качестве параметров команды можно указывать и другие указатели - идентификаторы коммитов, теги, HEAD и т.д.

Стоить отметить отличие двух команд:

```bash
git diff                                    # сравнивает рабочую директорию с индексом
git diff HEAD                               # сравнивает рабочую директорию с HEAD
```

`git diff` не сравнивает не отслеживаемые файлы.

Чтобы сравнить индекс с коммитом, используется ключ `--cached`:

```bash
git diff --cached <ref_1>                   # сравнивает индекс с коммитом
                                            # ref_1 - указатель на коммит
```

Есть еще один способ просмотреть изменения в файле - команда `git commit -v`.  
В этом случае откроется редактор для записи комментария к комиту, внизу которого будет приведена информация из `git diff --cached`, то есть различия индекса и HEAD.

Такое поведение можно включить и для `git commit` по умолчанию через конфиг:

```bash
git config --global commit.verbose true
```

или через алиас.

Сравнение файлов и директорий:

```bash
git diff <file_path1>                       # сравнение файла
git diff <dir_path1>                        # сравнение фиректории

```

#### Сравнение *нескольких* файлов

```bash
git diff <branch_name1> <branch_name2> -- <file_path1> <file_path2>
```

#### Сравнение *разных* файлов

Сравить два разных файла из двух разных коммитов:

```bash
git diff <ref_1>:<file_path_1> <ref_2>:<file_path_2>
```

Сравить два любых файла:

```bash
git diff --no-index <file_path_1> <file_path_2>
```

### Настройка сравнения: diff driver

Сравнение по словам:

```bash
git diff --word-diff                       #
git diff --word-diff=color                 # выделение diff полько цветом
git diff --color-words                     # то же самое
```

Под "словом" git понимает последовательность от пробела до пробела. Это создает трудности, например, при сравнении файлов *html*, поэтому для *html* файлов нужно использовать другой драйвер. выбор драйвера устанавливается в файле *.gitignore*.

```gitattributes
*.html diff=html
*.html diff=css
```

Свой драйвер можно добавить в конфиге через `[diff "<driver_name>"]`, `wordRegex`, `xfuncname` и пр., используя регулярные выражения *POSIX Extended*. [Подробнее.](https://git-scm.com/docs/gitattributes)

***

[< Отмена изменений (reset)](git-cheat-sheet-4.md) |